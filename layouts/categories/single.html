{{ define "main" }}
<section class="relative w-full pt-5 -mt-5">
  <img class="w-full h-full hero-bg-img object-cover " src="/svgs/page-hero-bonnes-pratiques-bg.svg" alt="">
  <div class="container pt-4 pb-16 text-white">
    {{ partial "breadcrumb" (dict "page" . "links" (slice "/categories")) }}
    <h1 class="text-h1 mt-10">{{ .Title}}</h1>
  </div>
</section>
<!-- <div class="bottom-nav-section"><a href=""><div class="our-button button-fill mx-auto">Thématiques suivantes</div></a></div> -->
<div class="container text-dark_gray mt-10 ">

  <div class="mx-auto w-full max-w-xl mb-5">

    <iframe class="aspect-video" width="100%" src="https://www.youtube.com/embed/CwLlBtHZxEI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>

    </iframe>
  </div>

  <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Id non quidem soluta similique vitae quas cumque deserunt obcaecati quibusdam autem odio, libero sit vero earum repudiandae! Repudiandae aliquid deserunt aliquam.</p>

  <div class="switch">
    <div class="switch-btn active" id="btn-vulnerabilites">Vulnérabilités</div>
    <div class="switch-btn" id="btn-preco">Préco</div>
  </div>
  <section class="active select-item mb-20" id="sec-left">
    {{ $vulnerabilities := (where .Site.Pages "Section" "vulnerabilities") }}
    {{ $vulnerabilitiesLinked := where $vulnerabilities ".Params.categories" "eq" .Title }}
    {{ if (gt (len $vulnerabilitiesLinked) 0) }}

    <h3 class="mt-4 text-h4 text-black">Les vulnérabilités</h3>


    <nav class=" grid-good-practice mt-10 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
        {{ range $vulnerabilitiesLinked }}
        <a href="{{ .Permalink }}" class="no-underline">

          <div class="border-perso rounded-md text-left px-3 py-5 h-full w-full flex flex-col  bg-white justify-between">
            <p class="text-orange">{{ .Title }}</p>
            <div class="flex align-middle justify-between w-full mt-5">
              <p class="text-secondary">Risques</p>
              <img src="/svgs/icon_forward.svg" alt="go to {{ .Title }}" class="w-5">
            </div>
          </div>
        </a>
        {{ end }}

    </nav>
    {{ end }}
  </section>

  <section class="select-item mb-20" id="sec-right">

    {{ $goodPractices := (where .Site.Pages "Section" "good-practices") }}

    {{ $goodPracticesLinked := where $goodPractices ".Params.categories" "eq" .Title }}

    {{ if (gt (len $goodPracticesLinked) 0) }}

    <h3 class="mt-4 text-h4 text-black">Les bonnes pratiques</h3>

      <nav class="grid-good-practice mt-10 grid-cols-1">
          {{ range $goodPracticesLinked}}
          <a href="{{ .Permalink }}" class="no-underline">

            <div class="border-perso rounded-md text-center px-3 py-5 h-full grid place-items-center bg-white">
              <p class="text-secondary">"{{ .Title }}"</p>

            </div>
          </a>
          {{ end }}

      </nav>
      {{ end }}
  </section>

</div>

<script>
  const switchBtns = document.querySelector('.switch');

  const sectionLeft = document.querySelector('#sec-left');
  const sectionRight = document.querySelector('#sec-right');

  switchBtns.addEventListener('click', () => {
    sectionLeft.classList.toggle('active')
    sectionRight.classList.toggle('active')

    switchBtns.firstElementChild.classList.toggle('active')
    switchBtns.lastElementChild.classList.toggle('active')
  })
</script>
{{ end}}
